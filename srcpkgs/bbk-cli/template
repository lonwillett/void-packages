# Template file for 'bbk-cli'
pkgname=bbk-cli
version=1.0
_debvers=0
revision=1
only_for_archs="x86_64 i686 armv7l aarch64"
build_style="fetch"
nostrip="yes"
short_desc="Bredbandskollen's command line tool"
maintainer="Lon Willett <xgit@lonw.net>"
license="Proprietary"
repository="nonfree"
homepage="https://www.bredbandskollen.se/"
distfiles="https://frontend.bredbandskollen.se/download/bbk-cli_${version}.${_debvers}_amd64.deb
https://frontend.bredbandskollen.se/download/bbk_cli_linux_amd64-${version}>bbk_cli.x86_64
https://frontend.bredbandskollen.se/download/bbk_cli_linux_i386-${version}>bbk_cli.i686
https://frontend.bredbandskollen.se/download/bbk_cli_linux_armhf-${version}>bbk_cli.armv7l
https://frontend.bredbandskollen.se/download/bbk_cli_linux_aarch64-${version}>bbk_cli.aarch64
https://frontend.bredbandskollen.se/download/bbk_cli_linux_mips-${version}>bbk_cli.mips"
checksum="8a30b86541cfe825b237ad7a79b69c3da8e34569b3b04303caab1a82c721a378
7768794f5ce2c2605aa34f38010812548e02703444e90f6912387f2f13a1127e
4c835a41f1887b3fbd39485b46ce31b8022ccd8de277bf74e54e9938d67cc170
e68c64273bbf15514e4f9015838432d393df7480b94a3c441b191f8dc8710aca
667f21ef17d8e04ff4c9b84aafa1b0b285d241e92227dc944a7112ed31a0fb53
083197f1ba3cff70d704839728038c49f4887f89878553626537c8da0671bb03"

do_extract() {
	ar p ${XBPS_SRCDISTDIR}/${pkgname}-${version}/bbk-cli_${version}.${_debvers}_amd64.deb data.tar.gz | tar xzpf - ./usr
	mv ${XBPS_SRCDISTDIR}/${pkgname}-${version}/bbk_cli.${XBPS_MACHINE} usr/bin/bbk_cli
	gunzip usr/share/doc/${pkgname}/README.gz
	gunzip usr/share/doc/${pkgname}/changelog.gz
}

do_install() {
	vbin usr/bin/bbk_cli
	vlicense usr/share/doc/bbk-cli/copyright
	vmkdir usr/share/doc/bbk-cli
	vinstall usr/share/doc/bbk-cli/README 644 usr/share/doc/bbk-cli
	vinstall usr/share/doc/bbk-cli/changelog 644 usr/share/doc/bbk-cli
}
